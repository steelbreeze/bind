<!DOCTYPE html>
<html lang="en">

<head>

</head>

<body>
    <h1>Hello <span id="name"></span></h1>
    <p><span id="selectedGender"></span>, <span id="selectedAge"></span></p>
    <div>
        <label for="givenName">Given name: </label>
        <input type="text" id="givenName">
    </div>
    <div>
        <label for="familyName">Family name: </label>
        <input type="text" id="familyName">
    </div>
    <div>
        <label for="gender">Gender: </label>
        <select id="gender">
    </div>
    <div>
        <label for="age">Age: </label>
        <input type="range" id="age" name="age" min="0" max="120">
    </div>
    <script type="text/javascript" src="./dist/bind.min.js"></script>
    <script>
        // initilise the model
        const genders = new bind.Observable(["Male", "Female", "Other"]);
        const person = new bind.Observable({ givenName: "Jane", familyName: "Doe", gender: "Female", age: 25 });

        // bind static visual elements to the model
        bind.stateToHTML("name", person, state => state.givenName + " " + state.familyName);
        bind.stateToHTML("selectedGender", person, state => state.gender);
//        bind.text(document.getElementById("selectedAge"), person, state => state.age);

        bind.stateToHTML("selectedAge", person, state => state.age);

        // add the options to the gender list (this needs to be done prior to binding the value)
        bind.stateToHTML("gender", genders, (state) => state.map(gender => bind.element("option", gender, { value: gender })).join(""));

        // update controls from observable state
        bind.propertyToValue("givenName", person);
        bind.propertyToValue("familyName", person);
        bind.propertyToValue("gender", person);
        bind.propertyToValue("age", person);

        // update the observable state from control changes
        bind.valueToProperty("givenName", person);
        bind.valueToProperty("familyName", person);
        bind.valueToProperty("gender", person);
        bind.valueToProperty("age", person);
    </script>
</body>

</html>